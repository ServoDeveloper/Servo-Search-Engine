SP.currentPage.registerSubscriptionForm=function(e){var o="#subscribe-form-"+e,s="#subscribe-btn-"+e;HRB.utils.bindBasicAjaxForm(o,s,function(e,o){var s,t,i=!1;if("string"==typeof o&&(o=JSON.parse(o)),"webhook"===o.mode)o.webhook===undefined?(s=!1,t={text:"Please enter an endpoint and a valid email at which you can be reached.",cssClass:"error"}):null===o.webhook?(s=!1,t={text:"This webhook endpoint is already subscribed to updates."}):o.webhook&&(s=!0,t={text:"Your endpoint is now subscribed to webhook updates. A confirmation message should arrive soon."});else{i=!("manage.statuspage.io"===window.location.hostname||"manage.statuspagestaging.com"===window.location.hostname||"manage.statuspagedev.com"===window.location.hostname)&&o.can_select_components,o.message?(s=!1,t={text:o.message}):o.email===undefined&&o.phone===undefined?(s=!1,t={text:"Please enter a valid email or a phone number that you wish to have updates sent to.",cssClass:"error"}):null===o.email&&o.phone===undefined?(s=!1,o.confirm_opt_in&&!o.duplicate?t={text:"Thanks for subscribing! Check your email to confirm your subscription."}:(t={text:"This email is already subscribed to updates."},i&&(t.text+=" To manage your subscription, follow the link at the bottom of the emails we send."))):o.email===undefined&&null===o.phone?(s=!1,t={text:"This phone is already subscribed to updates."},i&&(t.text+=" To manage your subscription, follow the link located in any of the SMS messages we send.")):null===o.email&&null===o.phone?(s=!1,t={text:"This email and phone are already subscribed to updates."}):o.email&&o.phone===undefined?(s=!0,t=o.duplicate?{text:"Your email is already subscribed. Use the form below to manage your subscription."}:o.confirm_opt_in?{text:"Thanks for subscribing! Check your email to confirm your subscription."}:i?{text:"Your email is now subscribed to updates! Use the boxes below to specify which components you're interested in."}:{text:"Your email is now subscribed to updates! A confirmation message should arrive soon."}):o.email===undefined&&o.phone?(s=!0,t=o.duplicate?{text:"Your phone is already subscribed. Use the form below to manage your subscription."}:i?{text:"Your phone is now subscribed to updates! Use the boxes below to specify which components you're interested in."}:{text:"Your phone is now subscribed to updates! A confirmation message should arrive soon."}):o.email&&null===o.phone?(s=!0,t={text:"Your email is now subscribed to updates! A confirmation message should arrive soon (phone was already subscribed)."}):null===o.email&&o.phone?(s=!0,t={text:"Your phone is now subscribed to updates! A confirmation message should arrive soon (email was already subscribed)."}):o.email&&o.phone&&(s=!0,t={text:"Your email and phone are now subscribed to updates! A confirmation message should arrive soon."})}if(s)return void(i?(HRB.utils.notify(t.text,{cssClass:t.cssClass,method:"deferred"}),window.location.href="/manage/_".replace("_",o.email||o.phone||o.webhook)):(HRB.utils.notify(t.text,{cssClass:t.cssClass,method:"deferred"}),window.location.reload()));HRB.utils.notify(t.text,{cssClass:t.cssClass})},function(e,o){420==o.status?HRB.utils.notify("Hang on there, partner. You're subscribing too fast (give it a quick second and try again).",{cssClass:"error"}):HRB.utils.basicFailAndReload(e)})};